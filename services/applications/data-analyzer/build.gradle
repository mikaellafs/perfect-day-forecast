/*
 * This file was generated by the Gradle 'init' task.
 */

apply plugin: 'application'

dependencies {
    implementation project(":components:data-analyzer")
    implementation project(":components:rabbit-support")
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.5.2'
    implementation 'com.rabbitmq:amqp-client:5.19.0'
    implementation 'com.google.code.gson:gson:2.8.8'
    implementation 'io.lettuce:lettuce-core:6.2.6.RELEASE'
}

application {
    // Define the main class for the application.
    mainClass = 'com.example.perfectdayforecast.app.AppKt'
}

tasks.withType(Copy).all {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

distTar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

distZip {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

project.ext {
    RABBIT_URL = "amqp://localhost:5672"
    RABBIT_ANALYZER_EXCHANGE = "analyzer-ex"
    RABBIT_ANALYZER_QUEUE= "analyzer-qu"
}

tasks.withType(JavaExec) {
    doFirst {
        environment RABBIT_URL: project.RABBIT_URL
        environment RABBIT_ANALYZER_EXCHANGE: project.RABBIT_ANALYZER_EXCHANGE
        environment RABBIT_ANALYZER_QUEUE: project.RABBIT_ANALYZER_QUEUE
    }
}